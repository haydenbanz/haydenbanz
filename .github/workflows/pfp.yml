# Licensed under The Unlicense
# Feel free to reuse, edit, and redistribute this workflow as you wish, no credits needed
# See https://github.com/lowlighter/metrics for documentation about how to use metrics action

name: Metrics
on:
  # ğŸŒ Think about the planet! No need to update stats too frequently
  schedule:
    - cron: "0 16 * * *"
  # ğŸ’¡ The following line lets you run workflow manually from the action tab!
  workflow_dispatch:

jobs:
  metrics:
    if: github.repository == 'haydenbanz/metrics'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Checkout examples
        run: git checkout examples

      - name: ğŸ—ƒï¸ Base content - Default metrics
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.base.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: header, activity, community, repositories, metadata
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ§± Core - Organization
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.organization.svg
          user: github
          token: ${{ secrets.METRICS_TOKEN_WITH_SCOPES }}
          base: header, repositories
          output_action: none
          delay: 120
          plugins_errors_fatal: yes

      - name: ğŸ§± Core - Large display
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.large.svg
          token: ${{ secrets.METRICS_TOKEN }}
          config_display: large
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ§± Core - JSON metrics
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.example.json
          token: ${{ secrets.METRICS_TOKEN }}
          config_output: json
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ§± Core - PNG metrics
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.example.png
          token: ${{ secrets.METRICS_TOKEN }}
          config_output: png
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ§± Core - Metrics insights
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.insights.html
          token: ${{ secrets.METRICS_TOKEN }}
          config_output: insights
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ§± Core - Plugin error example
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.error.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_projects: yes
          plugins_errors_fatal: no
          output_action: none
          delay: 120
          user: haydenbanz

      - name: ğŸ“… Isometric commit calendar - Half-year calendar
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.isocalendar.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_isocalendar: yes
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ“… Isometric commit calendar - Full-year calendar
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.isocalendar.fullyear.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸˆ·ï¸ Languages activity - Most used
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.languages.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_languages: yes
          plugin_languages_ignored: "vue, java, tex, less, dockerfile, makefile, qmake, lex, cmake, shell, gnuplot"
          plugin_languages_limit: 4
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸˆ·ï¸ Languages activity - Most used (with details)
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.languages.details.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_languages: yes
          plugin_languages_ignored: "html, css, tex, less, dockerfile, makefile, qmake, lex, cmake, shell, gnuplot"
          plugin_languages_details: "bytes-size, percentage"
          plugin_languages_limit: 4
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ““ Featured repositories - Pinned repositories
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.repositories.pinned.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_repositories: yes
          plugin_repositories_pinned: 2
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes
      - name: ğŸ’¬ Discussions - GitHub Discussions
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.discussions.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_discussions: yes
          plugin_discussions_categories_limit: 8
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ’« Star lists - Featured star list
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.starlists.svg
          token: NOT_NEEDED
          base: ""
          plugin_starlists: yes
          plugin_starlists_limit_repositories: 2
          plugin_starlists_only: TC39
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ’« Star lists - Featured star list languages
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.starlists.languages.svg
          token: NOT_NEEDED
          base: ""
          plugin_starlists: yes
          plugin_starlists_languages: yes
          plugin_starlists_limit_languages: 8
          plugin_starlists_limit_repositories: 0
          plugin_starlists_only: Awesome
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ“† Commit calendar - Current year calendar
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.calendar.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_calendar: yes
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ“† Commit calendar - Full history calendar
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.calendar.full.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_calendar: yes
          plugin_calendar_limit: 0
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ† Achievements - Detailed display
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.achievements.svg
          token: ${{ secrets.METRICS_TOKEN }}
          base: ""
          plugin_achievements: yes
          plugin_achievements_only: sponsor, maintainer, octonaut
          output_action: none
          delay: 120
          user: haydenbanz
          plugins_errors_fatal: yes

      - name: ğŸ† Achievements - Compact display
        uses: haydenbanz/metrics@hades
        with:
          filename: metrics.plugin.achievements.compact.svg
          token: ${{ secrets.METRICS_TOKEN }}
         
